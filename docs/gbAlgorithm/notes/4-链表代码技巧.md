---
title: 链表代码技巧
date: '2022-06-10 20:53:00'
sidebar: 'true'
categories:
  - java
tags:
  - 数据结构
  - 算法
  - 极客
---



## 技巧一：理解指针或引用的含义

**将某个变量赋值给指针，实际上就是将这个变量的地址赋值给指针，或者反过来说，指针中存储了这个变量的内存地址，指向了这个变量，通过指针就能找到这个变量。**

p->next=q。这行代码是说，p 结点中的 next 指针存储了 q 结点的内存地址。

p->next=p->next->next。这行代码表示，p 结点的 next 指针存储了 p 结点的下下一个结点的内存地址。



## 技巧二：警惕指针丢失和内存泄漏



![img](https://interview-aliyun.oss-cn-beijing.aliyuncs.com/myBlog/202208171425515.jpg)

如图所示，我们希望在结点 a 和相邻的结点 b 之间插入结点 x，假设当前指针 p 指向结点 a。

如果我们将代码实现变成下面这个样子，就会发生指针丢失和内存泄露。

```java
p->next = x;  // 将p的next指针指向x结点；
x->next = p->next;  // 将x的结点的next指针指向b结点；
```

对于有些语言来说，比如 C 语言，内存管理是由程序员负责的，如果没有手动释放结点对应的内存空间，就会产生内存泄露。

所以，我们**插入结点时，一定要注意操作的顺序**，要先将结点 x 的 next 指针指向结点 b，再把结点 a 的 next 指针指向结点 x，这样才不会丢失指针，导致内存泄漏。

```java
x->next = p->next;  // 将x的结点的next指针指向b结点；
p->next = x;  // 将p的next指针指向x结点；
```

同理，**删除链表结点时，也一定要记得手动释放内存空间**，否则，也会出现内存泄漏的问题。当然，对于像 Java 这种虚拟机自动管理内存的编程语言来说，就不需要考虑这么多了。



## 技巧三：利用哨兵简化实现难度

首先，我们先来回顾一下单链表的插入和删除操作。如果我们在结点 p 后面插入一个新的结点，只需要下面两行代码就可以搞定。

```java
new_node->next = p->next; 
p->next = new_node;
```

但是，当我们要向一个空链表中插入第一个结点时

```java
if (head == null) { 
    head = new_node; 
}
```

我们再来看单链表结点删除操作。如果要删除结点 p 的后继结点，我们只需要一行代码就可以搞定。

```java
p->next = p->next->next;
```

但是，如果我们要删除链表中的最后一个结点时

```java
if (head->next == null) {   
	head = null; 
}
```

**针对链表的插入、删除操作，需要对插入第一个结点和删除最后一个结点的情况进行特殊处理**。这样代码实现起来就会很繁琐，不简洁，而且也容易因为考虑不全而出错。如何来解决这个问题呢？

如果我们引入哨兵结点，在任何时候，不管链表是不是空，head 指针都会一直指向这个哨兵结点。

我们也把这种有哨兵结点的链表叫**带头链表**。相反，没有哨兵结点的链表就叫作**不带头链表**。

哨兵结点是不存储数据的。**因为哨兵结点一直存在，所以插入第一个结点和插入其他结点，删除最后一个结点和删除其他结点，都可以统一为相同的代码实现逻辑**

![img](https://interview-aliyun.oss-cn-beijing.aliyuncs.com/myBlog/202208171747768.jpg)

实际上，这种利用哨兵简化编程难度的技巧，在很多代码实现中都有用到，比如插入排序、归并排序、动态规划等。



## 技巧四：重点留意边界条件处理

我经常用来检查链表代码是否正确的边界条件有这样几个：

1. 如果链表为空时，代码是否能正常工作
2. 如果链表只包含一个结点时，代码是否能正常工作
3. 如果链表只包含两个结点时，代码是否能正常工作
4. 代码逻辑在处理头结点和尾结点的时候，是否能正常工作

当你写完链表代码之后，除了看下你写的代码在正常的情况下能否工作，还要看下在上面我列举的几个边界条件下，代码仍然能否正确工作。如果这些边界条件下都没有问题，那基本上可以认为没有问题了。

当然，边界条件不止我列举的那些。针对不同的场景，可能还有特定的边界条件，这个需要你自己去思考，不过套路都是一样的。



## 技巧五：举例画图，辅助思考

你可以找一个具体的例子，把它画在纸上，释放一些脑容量，留更多的给逻辑思考，这样就会感觉到思路清晰很多。比如往单链表中插入一个数据这样一个操作，我一般都是把各种情况都举一个例子，画出插入前和插入后的链表变化，如图所示：

![img](https://interview-aliyun.oss-cn-beijing.aliyuncs.com/myBlog/202208171747890.jpg)



## 技巧六：多写多练，没有捷径

如果你已经理解并掌握了我前面所讲的方法，但是手写链表代码还是会出现各种各样的错误。

你只要把这几个操作都能写熟练，不熟就多写几遍，我保证你之后再也不会害怕写链表代码。

* 单链表反转
* 链表中环的检测
* 两个有序的链表合并
* 删除链表倒数第 n 个结点
* 求链表的中间结点